<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dao.InsertSongDao">
    <!--对二级缓存进行设置-->
    <cache eviction="LRU" flushInterval="60000"
           size="512" readOnly="true"/>
    <resultMap id="resultSong" type="model.DownloadModel">
        <result column="customer_id" property="customerId"/>
        <result column="img_url" property="imgUrl"/>
        <result column="song_name" property="songName"/>
        <result column="singer_name" property="singerName"/>
        <result column="play_url" property="playUrl"/>
    </resultMap>
    <insert id="insertSongCloud" parameterType="model.User">
        INSERT INTO
        customer_song (customer_id , img_url , song_name , singer_name , play_url,album_name)
        VALUES
        (#{userId},#{imgUrl},#{songName},#{singerName},#{playUrl},#{albumName})
    </insert>
    <select id="getSongs" resultMap="resultSong">
        SELECT * FROM customer_song
        <where>
            <if test="customer_id != 0">
                customer_id = ${customer_id}
            </if>
        </where>
    </select>
</mapper>